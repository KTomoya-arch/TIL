# SRE サイトリライアビリティエンジニアリング本

## はじめに

アポロの話を受けて描かれている重要な SRE 的なやり方として、徹底と献身、準備とドキュメンテーションの価値を信じること、何がおかしくなりうるかをそれを避けようとする強い意志を持って認識しておくこと。

## イントロダクション第 I 部

- SRE とは何か？
- なぜ SRE が IT 業界における従来型の実践手法とは異なるのか？

従来シスアドと開発者という位置付けは例も多く真似しやすい・ツールもいろいろあり車輪の再発明せずにできるということから多く用いられてきたが
(その分断には)落とし穴やデメリットが存在する。２チームのバックグラウンド・スキルセット・動機づけが全く異なることから技術的な解決策のリスク・可能性に対して
異なる想定をしがちだったり、コミュニケーション、目標、信頼・尊重といったところにまで影響が及んだりする。
そのため衝突しがちである。早くリリースしたい側と安定してゆっくりとやっていきたい側。

- Google では採用したエンジニアにサービスを運用させ従来であればシスアドが手作業でやっていた作業を遂行するシステムを構築させている
- SRE とはソフトウェアエンジニアに運用チームの設計を依頼したときに出来上がるものだ、手作業でタスクをこなすことに飽きて運用チームが行ってきたことをソフトウェアの専門性を持つエンジニア
  が行い、エンジニアが人手による管理を自動化するソフトウェアを設計し実装する能力を持ちそれを厭わない

- Google では手作業、オンコール、チケットなどの作業を 50%以下にするようにしている。残りの 50%はエンジニアリングに割いている。→ 計測せよ！何に時間を使っているのかを。

### SRE の信条

- SRE が責任を負うもの
  - サービスの可用性
  - レイテンシ
  - パフォーマンス
  - 効率性
  - 変更管理
  - モニタリング
  - 緊急対応
  - キャパシティプランニング

### SLO を下回らずに開発速度を最大化

開発 vsSRE を解決するのがエラーバジェットの存在
100%と 99.999%の違いなんて誰にもわからんから 100%なんて目指す必要なんてない
→100%を目標にしないのであれば、じゃあいくつを信頼性の目標値にしたらいいんだ？？？(これは技術的な問題ではなく、プロダクトとしての問題である。)

プロダクトの利用するイメージをした際に

- ユーザーはどれぐらいの可用性があれば満足する？
- 可溶性に満足できなかったユーザーの代替策は？
- 可用性のレベルを変更したとしてユーザーのプロダクト利用方法に何か変化はあるか？

こういった思考のもとで信頼性を設定し、サービス障害・インシデントなどが発生したとしてもそれは悪ではなく予想済みの部分であり
それらをコントロールするようになる。

### モニタリング
- アラート
人が即座にアクションを起こして対応し、状況を改善しなければならないことが生じていることを伝える

- チケット
即座ではなくても良い。人が数日対応かかっても良いようなもの。

- ロギング
ただの記録

MTTFは平均故障時間である製品の使用を開始してから故障するまでの時間
MTTRは平均修復時間

およそ70%の障害は動作中のシステムの変更によって生じていることをSREは発見した。(Googleの話かな？)
なので下記を自動化によって実現できることが望ましいといっている。
- 漸進的なロールアウト(順を追って段々と新しい機能をリリースしていくこと。)
- 高速化つ正確な問題の検出
- 問題が生じた際の安全なロールバック

### 需要の予測とキャパシティプランニング
予想されている未来の需要に対して必要な可用性を提供できる十分なキャパシティと冗長性を保証することである。
自然な成長(顧客によるプロダクトの採用と利用から自然に生じるもの)と突発的な成長の双方を考慮する必要がある。
キャパシティプランニングのステップ

- 自然な需要の正確な予測。キャパシティのリソース確保に必要なリードタイムなども確認しておく。
- 需要予測に突発的な需要の発生源を正確に織り込むこと。
- 計算リソースのキャパシティ(サーバーやディスク)とサービスのキャパシティの関連を把握するための、定期的なシステムの負荷テスト。

### 効率とパフォーマンス



